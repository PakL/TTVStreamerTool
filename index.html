<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>TTVStreamerTool</title>

		<link rel="stylesheet" type="text/css" href="res/style.css" />
		<script type="application/javascript" src="node_modules/riot/riot%2Bcompiler.min.js"></script>
		<script type="application/javascript" src="lib/chathelper.js"></script>
		<script type="application/javascript">
			const {shell, remote} = require('electron')
			const {Menu, MenuItem, globalShortcut} = remote

			const openLinkExternal = function(url) {
				shell.openExternal(url)
			}

			const Tool = require('./mod/tool')
		</script>
	</head>
	<body>
		<div id="contents">
			<div id="content_cockpit">
				<div id="channel_status_column">
					<script type="application/javascript">document.write(`<input type="text" id="channel_status" placeholder="${Tool.i18n.__('Stream status')}">`)</script>
					<script type="application/javascript">document.write(`<input type="text" id="channel_game" placeholder="${Tool.i18n.__('Stream game')}">`)</script>
					<autocomplete id="ac_channel_game"></autocomplete>
				</div>
				<div id="channel_viewers_column">
					<viewerplotter id="channel_viewers"></viewerplotter>
				</div>

				<div id="chat_column"><chat id="channelchat"></chat></div>
				<div id="chat_users_column" rowspan="2"><userlist id="channeluser"></userlist></div>
				<div id="cockpit_action_stream" rowspan="2"><actionstream id="channelactions"></actionstream></div>
				
				<div id="chat_message_column">
					<div style="padding: 0 5px"><script type="application/javascript">document.write(`<input type="text" id="chat_message" placeholder="${Tool.i18n.__('Write a message...')}">`)</script></div>
					<autocomplete id="ac_message_usernames"></autocomplete>
				</div>
			</div>

			<div id="content_follows">
				<script type="application/javascript">document.write(`<input type="text" id="openchannel_input" placeholder="${Tool.i18n.__('Type channel name and press Enter')}">`)</script>
				<channellist id="myfollows"></channellist>
			</div>

			<div id="content_overlays">
				<div style="padding:5px;">
					<fieldset>
						<legend><script type="application/javascript">document.write(Tool.i18n.__('Music Overlay'))</script></legend>
						<label>
							<script type="application/javascript">document.write(Tool.i18n.__('Youtube playlist id: (has to be public)'))</script>
							<input type="text" id="overlay_music_playlistid">
							<small><script type="application/javascript">document.write(Tool.i18n.__('Press Enter when finished to save'))</script></small>
						</label>
						<label>
							<script type="application/javascript">document.write(Tool.i18n.__('Default volume'))</script>
							<input type="range" id="overlay_music_volume" min="0" max="100" step="5">
						</label>
						<label>
							<script type="application/javascript">document.write(Tool.i18n.__('Live volume control'))</script>
							<input type="range" id="overlay_music_volume_control" min="0" max="100">
						</label>
						<label>
							<script type="application/javascript">document.write(Tool.i18n.__('Overlay URL'))</script>
							<input type="text" id="overlay_music_url" readonly>
							<small><script type="application/javascript">document.write(Tool.i18n.__('Add #black to the end of the URL to get black text with white borders instead of white text with black borders.'))</script></small>
						</label>
						<label>
							<script type="application/javascript">document.write(Tool.i18n.__('Overlay volume control URL'))</script>
							<input type="text" id="overlay_music_volume_control_url" readonly>
							<small><script type="application/javascript">document.write(Tool.i18n.__('This is a completely transparent overlay you can use in different OBS scenes to control the volume on scene changes. Change the number at the end to anything between 0 (mute) to 100 (way to loud).'))</script></small>
						</label>
					</fieldset>
					<fieldset>
						<legend><script type="application/javascript">document.write(Tool.i18n.__('Overlay hotkeys'))</script></legend>

						<overlayhotkeys id="overlay_hotkeys"></overlayhotkeys>
					</fieldset>
				</div>
			</div>
		</div>

		<modal id="logindialog">
			<h3><script type="application/javascript">document.write(Tool.i18n.__('Welcome to TTVStreamerTool'))</script></h3>
			<script type="application/javascript">document.write(Tool.i18n.__('To use this program you gonna need a Twitch channel. You can login via Twitch here.'))</script><br>
			<script type="application/javascript">document.write(Tool.i18n.__('Only then the program is able to to something.'))</script>
			<div style="text-align:center;margin-top:10px;">
				<button id="starttwitchauth" onclick="Tool.auth.auth()"><script type="application/javascript">document.write(Tool.i18n.__('Login via Twitch'))</script></button>
			</div>
		</modal>

		<modal id="highlightdialog" style="display:none;">
			<h3><script type="application/javascript">document.write(Tool.i18n.__('Add a highlighter'))</script></h3>
			<label>
				<script type="application/javascript">document.write(Tool.i18n.__('Word or phrase that triggers a message highlight:'))</script>
				<input type="text" id="highlightdialog_phrase">
				<output id="highlightdialog_errors"></output>
			</label>
			<table>
				<tr>
					<td>
						<label>
							<script type="application/javascript">document.write(Tool.i18n.__('Regular expression'))</script>
							<a href="#" onclick="openLinkExternal('http://www.regular-expressions.info/')">(?)</a>
							<input type="checkbox" id="highlightdialog_regex">
						</label>
					</td>
					<td>
						<label>
							<script type="application/javascript">document.write(Tool.i18n.__('Case sensitive'))</script>
							<input type="checkbox" id="highlightdialog_casesensitive">
						</label>
					</td>
				</tr>
			</table>
			<button id="highlightdialog_save" onclick="Tool.settings.saveNewHighlight()"><script type="application/javascript">document.write(Tool.i18n.__('Save'))</script></button>
			<button id="highlightdialog_cancel" onclick="Tool.settings.cancelNewHighlight()"><script type="application/javascript">document.write(Tool.i18n.__('Cancel'))</script></button>
		</modal>

		<script type="riot/tag" src="res/tags/raw.tag"></script>

		<script type="riot/tag" src="res/tags/autocomplete.tag"></script>
		<script type="riot/tag" src="res/tags/message.tag"></script>
		<script type="riot/tag" src="res/tags/chat.tag"></script>
		<script type="riot/tag" src="res/tags/userlist.tag"></script>
		<script type="riot/tag" src="res/tags/actionstream.tag"></script>
		<script type="riot/tag" src="res/tags/viewerplotter.tag"></script>
		<script type="riot/tag" src="res/tags/modal.tag"></script>
		<script type="riot/tag" src="res/tags/channel.tag"></script>
		<script type="riot/tag" src="res/tags/channellist.tag"></script>
		<script type="riot/tag" src="res/tags/hotkey.tag"></script>
		<script type="riot/tag" src="res/tags/overlayhotkeys.tag"></script>
	</body>
</html>